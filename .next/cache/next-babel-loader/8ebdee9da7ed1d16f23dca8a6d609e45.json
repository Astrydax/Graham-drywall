{"ast":null,"code":"const nodemailer = require('nodemailer');\n\nconst smtpTransport = require('nodemailer-smtp-transport');\n\nexport default function (req, res) {\n  if (req.method === \"POST\") {\n    // configure smtp transporter\n    const transporter = nodemailer.createTransport(smtpTransport({\n      service: 'gmail',\n      host: 'smtp.gmail.com',\n      auth: {\n        user: 'astrydax.webmail@gmail.com',\n        pass: 'Jmac37912!!'\n      }\n    }));\n    const body = JSON.parse(req.body);\n    const string = `\n      From: ${body.name}\n      Email: ${body.email}\n      Phone: ${body.phone}\n      Message: ${body.message}\n    `;\n    const mailOptions = {\n      from: `${body.name} <grahamdrywall@bar.com>`,\n      to: 'ryut13@gmail.com',\n      subject: `New Estimate Request from: ${body.name}`,\n      text: string\n    }; // send email through smtp transporter\n\n    transporter.sendMail(mailOptions, (error, info) => {\n      if (error) {\n        console.log(error);\n        res.send({\n          status: 400\n        });\n      } else {\n        console.log('Email sent: ' + info.response);\n        res.send({\n          status: 200\n        });\n      }\n    });\n  }\n}","map":{"version":3,"sources":["/mnt/c/Users/antho/Desktop/Graham-drywall/pages/api/contact.js"],"names":["nodemailer","require","smtpTransport","req","res","method","transporter","createTransport","service","host","auth","user","pass","body","JSON","parse","string","name","email","phone","message","mailOptions","from","to","subject","text","sendMail","error","info","console","log","send","status","response"],"mappings":"AAAA,MAAMA,UAAU,GAAGC,OAAO,CAAC,YAAD,CAA1B;;AACA,MAAMC,aAAa,GAAGD,OAAO,CAAC,2BAAD,CAA7B;;AAEA,eAAe,UAASE,GAAT,EAAcC,GAAd,EAAmB;AAChC,MAAID,GAAG,CAACE,MAAJ,KAAe,MAAnB,EAA2B;AACzB;AACA,UAAMC,WAAW,GAAGN,UAAU,CAACO,eAAX,CAClBL,aAAa,CAAC;AACZM,MAAAA,OAAO,EAAE,OADG;AAEZC,MAAAA,IAAI,EAAE,gBAFM;AAGZC,MAAAA,IAAI,EAAE;AACJC,QAAAA,IAAI,EAAE,4BADF;AAEJC,QAAAA,IAAI,EAAE;AAFF;AAHM,KAAD,CADK,CAApB;AAWA,UAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWZ,GAAG,CAACU,IAAf,CAAb;AAEA,UAAMG,MAAM,GAAI;cACNH,IAAI,CAACI,IAAK;eACTJ,IAAI,CAACK,KAAM;eACXL,IAAI,CAACM,KAAM;iBACTN,IAAI,CAACO,OAAQ;KAJ1B;AAOA,UAAMC,WAAW,GAAG;AAClBC,MAAAA,IAAI,EAAG,GAAET,IAAI,CAACI,IAAK,0BADD;AAElBM,MAAAA,EAAE,EAAE,kBAFc;AAGlBC,MAAAA,OAAO,EAAG,8BAA6BX,IAAI,CAACI,IAAK,EAH/B;AAIlBQ,MAAAA,IAAI,EAAET;AAJY,KAApB,CAtByB,CA6BzB;;AACAV,IAAAA,WAAW,CAACoB,QAAZ,CAAqBL,WAArB,EAAkC,CAACM,KAAD,EAAQC,IAAR,KAAiB;AACjD,UAAID,KAAJ,EAAW;AACTE,QAAAA,OAAO,CAACC,GAAR,CAAYH,KAAZ;AACAvB,QAAAA,GAAG,CAAC2B,IAAJ,CAAS;AAACC,UAAAA,MAAM,EAAC;AAAR,SAAT;AACD,OAHD,MAGO;AACLH,QAAAA,OAAO,CAACC,GAAR,CAAY,iBAAiBF,IAAI,CAACK,QAAlC;AACA7B,QAAAA,GAAG,CAAC2B,IAAJ,CAAS;AAACC,UAAAA,MAAM,EAAC;AAAR,SAAT;AACD;AACF,KARD;AASD;AACF","sourcesContent":["const nodemailer = require('nodemailer');\nconst smtpTransport = require('nodemailer-smtp-transport');\n\nexport default function(req, res) {\n  if (req.method === \"POST\") {\n    // configure smtp transporter\n    const transporter = nodemailer.createTransport(\n      smtpTransport({\n        service: 'gmail',\n        host: 'smtp.gmail.com',\n        auth: {\n          user: 'astrydax.webmail@gmail.com',\n          pass: 'Jmac37912!!'\n        }\n      })\n    );\n\n    const body = JSON.parse(req.body);\n    \n    const string = `\n      From: ${body.name}\n      Email: ${body.email}\n      Phone: ${body.phone}\n      Message: ${body.message}\n    `;\n    \n    const mailOptions = {\n      from: `${body.name} <grahamdrywall@bar.com>`,\n      to: 'ryut13@gmail.com',\n      subject: `New Estimate Request from: ${body.name}`,\n      text: string,\n    };\n\n    // send email through smtp transporter\n    transporter.sendMail(mailOptions, (error, info) => {\n      if (error) {\n        console.log(error);\n        res.send({status:400});\n      } else {\n        console.log('Email sent: ' + info.response);\n        res.send({status:200});\n      }\n    });\n  }\n}"]},"metadata":{},"sourceType":"module"}