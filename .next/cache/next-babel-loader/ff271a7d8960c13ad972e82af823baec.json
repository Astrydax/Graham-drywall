{"ast":null,"code":"const nodemailer = require('nodemailer');\n\nconst smtpTransport = require('nodemailer-smtp-transport');\n\nexport default function (req, res) {\n  if (req.method === \"POST\") {\n    // configure smtp transporter\n    const transporter = nodemailer.createTransport(smtpTransport({\n      service: 'gmail',\n      host: 'smtp.gmail.com',\n      auth: {\n        user: 'astrydax.webmail@gmail.com',\n        pass: 'Jmac37912!!'\n      }\n    }));\n    const body = JSON.parse(req.body);\n    const string = `\n      From: ${body.name}\n      Email: ${body.email}\n      Phone: ${body.phone}\n      Message: ${body.message}\n    `;\n    const mailOptions = {\n      from: `${body.name} <grahamdrywall@bar.com>`,\n      to: 'ryut13@gmail.com',\n      subject: `New Estimate Request from: ${body.name}`,\n      text: string\n    }; // send email through smtp transporter\n\n    transporter.sendMail(mailOptions, (error, info) => {\n      if (error) {\n        console.log(error);\n        res.send({\n          status: 400\n        });\n      } else {\n        console.log('Email sent: ' + info.response);\n        res.send({\n          status: 200\n        });\n      }\n    });\n  }\n}","map":null,"metadata":{},"sourceType":"module"}